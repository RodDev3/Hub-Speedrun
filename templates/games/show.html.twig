{% extends 'base.html.twig' %}

{% block title %}Games{% endblock %}

{% block body %}
    <h1>Games</h1>

    <table class="table">
        <tbody>
            <tr>
                <th>Id</th>
                <td>{{ game.id }}</td>
            </tr>
            <tr>
                <th>Name</th>
                <td>{{ game.name }}</td>
            </tr>
            <tr>
                <th>ReleaseDate</th>
                <td>{{ game.releaseDate ? game.releaseDate|date('Y-m-d') : '' }}</td>
            </tr>
            <tr>
                <th>DiscordLink</th>
                <td>{{ game.discordLink }}</td>
            </tr>
            <tr>
                <th>Image</th>
                <td>{{ game.image }}</td>
            </tr>
            <tr>
                <th>Rewrite</th>
                <td>{{ game.rewrite }}</td>
            </tr>
        </tbody>
    </table>

    <a href="{{ path('app_games_index') }}">back to list</a>



    {% if user is not null %}

        {% if user.getModerationRolesFromGames(game) is not null %}

            {# Super mods button #}
            {% if user.getModerationRolesFromGames(game).rankOrder <= ROLE_SMOD_RANK %}
                <a href="{{ path('app_moderations_index', {'rewrite': game.rewrite}) }}"> Manage moderation team</a>
            {% endif %}

            {# Mods button #}
            {% if user.getModerationRolesFromGames(game).rankOrder <= ROLE_MOD_RANK %}

                <a href="{{ path('app_games_edit', {'id': game.id}) }}">edit</a>
                <a href="{{ path('app_categories_index', {'rewrite' : game.rewrite}) }}"> Manage Categories</a>

            {% endif %}

        {% endif %}

    {% endif %}

    {{ include('games/_delete_form.html.twig') }}

    {# TODO SET IMAGE PAR DEFAULT OU IMAGE OBLIGATOIRE #}
    <div>
        <img src="{{ game.image }}" alt="Image {{ game.name }}">
    </div>
    <h1>{{ game.name }}</h1>

    <div id="leaderboardWrapper" {{ stimulus_controller('leaderboard') }}>
        <div id="categoriesWrapper">
            {% for category in game.refCategories %}
                <button data-categories="{{ category.uuid }}" class="categories" data-> {{ category.name }} </button>
            {% endfor %}
        </div>

        <div id="leaderboard"></div>
    </div>

{% endblock %}
